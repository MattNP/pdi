clear all; close all; clc

% OPCIONES DE VALORES PARA X0,X1,Y0,Y1 
% ---------------------------
% |          ----            |
% |         | up |           |
% |          ----            |
% |   ----         ----      |
% |  |left|       |right|    |
% |   ----         ----      |
% |          ----            |
% |         |down|           |
% |          ----            |
% ---------------------------
% up = 64:192,256:84
% left = 192:320,64:192
% right = 192:320,448:576;
% down = 320:448,256:384;

% DEFINIMOS LAS VARIABLES X0,X1,Y0,Y1 PARA CADA SECCIÓN
% |Y0,Y1|
% |X0,X1|
up = [64,192;256,384];
left = [192,320;64,192];
right = [192,320;448,576];
down = [320,448;256,384];

% CREAMOS IMAGEN CON LAS VENTANAS DONDE SE APLICARÁ EL SENSOR DE
% MOVIMIENTO

sectors = zeros(480,640,'uint8');
sectors(up(1,1):up(1,2),up(2,1):up(2,2)) = 255;
sectors(left(1,1):left(1,2),left(2,1):left(2,2)) = 255;
sectors(right(1,1):right(1,2),right(2,1):right(2,2)) = 255;
sectors(down(1,1):down(1,2),down(2,1):down(2,2)) = 255;

% CREAMOS UNA FIGURA PARA MOSTRAR LA IMAGEN
hFig = figure('Toolbar','none',...
       'Menubar', 'none',...
       'NumberTitle','Off',...
       'Name','My Custom Preview GUI');

% CONFIGURAMOS LA ADQUISICIÓN DEL VIDEO
vid = videoinput('linuxvideo',1,'RGB24_640x480');

% CREAMOS EL OBJETO IMAGEN DONDE SE VA A MOSTRAR EL VIDEO
vidRes = vid.VideoResolution;
imWidth = vidRes(1);
imHeight = vidRes(2);
nBands = vid.NumberOfBands;
hImage = image( zeros(imHeight, imWidth, nBands) );

% Specify the size of the axes that contains the image object
% so that it displays the image at the right resolution and
% centers it in the figure window.
figSize = get(hFig,'Position');
figWidth = figSize(3);
figHeight = figSize(4);
gca.unit = 'pixels';
gca.position = [ ((figWidth - imWidth)/2)... 
               ((figHeight - imHeight)/2)...
               imWidth imHeight ];

% Set up the update preview window function.
setappdata(hImage,'UpdatePreviewWindowFcn',@mypreview_fcn);

% % Make handle to text label available to update function.
% setappdata(hImage,'HandleToTimestampLabel',hTextLabel);

preview(vid, hImage);


% [a] = SensorMov(x10,x11,y10,y11);
% [b] = SensorMov(x20,x21,y20,y21);
% [c] = SensorMov(x30,x31,y30,y31);
% [d] = SensorMov(x40,x41,y40,y41);
% [e] = SensorMov(x50,x51,y50,y51);
% [f] = SensorMov(x60,x61,y60,y61);
% close all;
% figure(1); title(strcat('a = ', num2str(a)));
